#include <stdio.h>
#include <stdlib.h>

// -------- Exercice 1 : Somme de matrices --------
void sommeMatrices() {
    int m, n;
    printf("Entrez le nombre de lignes : "); scanf("%d", &m);
    printf("Entrez le nombre de colonnes : "); scanf("%d", &n);
    int A[m][n], B[m][n], C[m][n];
    printf("Entrez les elements de la matrice A :\n");
    for (int i = 0; i < m; i++) for (int j = 0; j < n; j++) scanf("%d", &A[i][j]);
    printf("Entrez les elements de la matrice B :\n");
    for (int i = 0; i < m; i++) for (int j = 0; j < n; j++) scanf("%d", &B[i][j]);
    for (int i = 0; i < m; i++)
        for (int j = 0; j < n; j++)
            C[i][j] = A[i][j] + B[i][j];
    printf("La somme des matrices est :\n");
    for (int i = 0; i < m; i++) { for (int j = 0; j < n; j++) printf("%d ", C[i][j]); printf("\n"); }
}

// -------- Exercice 2 : Produit de matrices --------
void produitMatrices() {
    int m, n, p;
    printf("Entrez le nombre de lignes de la matrice A : "); scanf("%d", &m);
    printf("Entrez le nombre de colonnes de A (et lignes de B) : "); scanf("%d", &n);
    printf("Entrez le nombre de colonnes de la matrice B : "); scanf("%d", &p);
    int A[m][n], B[n][p], C[m][p];
    printf("Entrez les elements de A :\n");
    for (int i = 0; i < m; i++) for (int j = 0; j < n; j++) scanf("%d", &A[i][j]);
    printf("Entrez les elements de B :\n");
    for (int i = 0; i < n; i++) for (int j = 0; j < p; j++) scanf("%d", &B[i][j]);
    for (int i = 0; i < m; i++) for (int j = 0; j < p; j++) {
        C[i][j] = 0;
        for (int k = 0; k < n; k++) C[i][j] += A[i][k] * B[k][j];
    }
    printf("Le produit des matrices est :\n");
    for (int i = 0; i < m; i++) { for (int j = 0; j < p; j++) printf("%d ", C[i][j]); printf("\n"); }
}

// -------- Exercice 3 : Recherche sÃ©quentielle --------
void rechercheSequentielle() {
    int n, x, found = 0;
    printf("Entrez la taille du tableau : "); scanf("%d", &n);
    int T[n];
    printf("Entrez les elements :\n");
    for (int i = 0; i < n; i++) scanf("%d", &T[i]);
    printf("Entrez l'element a rechercher : "); scanf("%d", &x);
    for (int i = 0; i < n; i++) {
        if (T[i] == x) { printf("Element %d trouve a la position %d (indice %d)\n", x, i+1, i); found = 1; break; }
    }
    if (!found) printf("Element %d non trouve.\n", x);
}

// -------- Exercice 4 : a x b avec +1 --------
void multiplicationPlus1() {
    int a, b; 
    printf("Entrez deux entiers positifs a et b : "); scanf("%d %d", &a, &b);
    int produit = 0;
    for (int i = 0; i < b; i++) { int temp = 0; for (int j = 0; j < a; j++) temp = temp + 1; produit += temp; }
    printf("Le produit de %d et %d est : %d\n", a, b, produit);
}

// -------- Exercice 5 : Tester si un tableau est trie --------
void testerTrie() {
    int n, estTrie = 1;
    printf("Entrez la taille du tableau : "); scanf("%d", &n);
    int T[n]; printf("Entrez les elements :\n");
    for (int i = 0; i < n; i++) scanf("%d", &T[i]);
    for (int i = 0; i < n-1; i++) if (T[i] > T[i+1]) { estTrie = 0; break; }
    if (estTrie) printf("Le tableau est trie.\n"); else printf("Le tableau n'est pas trie.\n");
}

// -------- Exercice 6 : Median --------
void trier(int T[], int n) { for (int i = 0; i < n-1; i++) for (int j = 0; j < n-i-1; j++) if (T[j]>T[j+1]) { int tmp=T[j]; T[j]=T[j+1]; T[j+1]=tmp; } }
void medianTableau() {
    int n; printf("Entrez la taille du tableau : "); scanf("%d",&n);
    int T[n]; printf("Entrez les elements :\n"); for(int i=0;i<n;i++) scanf("%d",&T[i]);
    trier(T,n);
    if(n%2==1) printf("Le median est : %d\n", T[n/2]);
    else printf("Le median est : %.2f\n", (T[(n-1)/2]+T[n/2])/2.0);
}

// -------- Exercice 7 : Inverser un tableau --------
void inverserTableau() {
    int n; printf("Entrez la taille du tableau : "); scanf("%d",&n);
    int T[n]; printf("Entrez les elements :\n"); for(int i=0;i<n;i++) scanf("%d",&T[i]);
    for(int i=0;i<n/2;i++){ int tmp=T[i]; T[i]=T[n-1-i]; T[n-1-i]=tmp; }
    printf("Tableau inverse : "); for(int i=0;i<n;i++) printf("%d ",T[i]); printf("\n");
}

// -------- Exercice 8 : Produit vectoriel --------
void produitVectoriel() {
    int A[3], B[3], C[3];
    printf("Entrez 3 composantes du vecteur A : "); for(int i=0;i<3;i++) scanf("%d",&A[i]);
    printf("Entrez 3 composantes du vecteur B : "); for(int i=0;i<3;i++) scanf("%d",&B[i]);
    C[0]=A[1]*B[2]-A[2]*B[1]; C[1]=A[2]*B[0]-A[0]*B[2]; C[2]=A[0]*B[1]-A[1]*B[0];
    printf("Produit vectoriel A x B : (%d, %d, %d)\n", C[0], C[1], C[2]);
}

// -------- Exercice 9 : Produit vecteur x matrice --------
void produitVecteurMatrice() {
    int n,p; printf("Taille du vecteur n : "); scanf("%d",&n);
    printf("Colonnes de la matrice p : "); scanf("%d",&p);
    int V[n], M[n][p], R[p];
    printf("Entrez les elements du vecteur :\n"); for(int i=0;i<n;i++) scanf("%d",&V[i]);
    printf("Entrez les elements de la matrice :\n"); for(int i=0;i<n;i++) for(int j=0;j<p;j++) scanf("%d",&M[i][j]);
    for(int j=0;j<p;j++){ R[j]=0; for(int i=0;i<n;i++) R[j]+=V[i]*M[i][j]; }
    printf("Resultat V x M = [ "); for(int j=0;j<p;j++) printf("%d ",R[j]); printf("]\n");
}

// -------- Menu principal --------
int main() {
    int choix;
    do {
        printf("\n--- MENU EXERCICES INF 231 ---\n");
        printf("1. Somme de matrices\n");
        printf("2. Produit de matrices\n");
        printf("3. Recherche sequentielle\n");
        printf("4. Multiplication a x b (+1 seulement)\n");
        printf("5. Tester si tableau est trie\n");
        printf("6. Median d'un tableau\n");
        printf("7. Inverser un tableau\n");
        printf("8. Produit vectoriel\n");
        printf("9. Produit vecteur x matrice\n");
        printf("0. Quitter\n");
        printf("Entrez votre choix : "); scanf("%d", &choix);
        switch(choix){
            case 1: sommeMatrices(); break;
            case 2: produitMatrices(); break;
            case 3: rechercheSequentielle(); break;
            case 4: multiplicationPlus1(); break;
            case 5: testerTrie(); break;
            case 6: medianTableau(); break;
            case 7: inverserTableau(); break;
            case 8: produitVectoriel(); break;
            case 9: produitVecteurMatrice(); break;
            case 0: printf("Au revoir !\n"); break;
            default: printf("Choix invalide.\n");
        }
    } while(choix != 0);
    return 0;
}
